{"version":3,"file":"5.b8a3e62a5fb5a2f17a3f.hot-update.js","sources":["webpack:///client/actions/auth.js","webpack:///client/actions/index.js","webpack:///client/components/BodyWrapper/BodyWrapper.js","webpack:///client/components/Header/Header.js","webpack:///client/components/Header/HeaderLeftMenu.js","webpack:///client/components/Header/HeaderRightMenu.js"],"sourcesContent":["import Router from 'next/router';\nimport axios from 'axios';\nimport cookie from 'js-cookie';\nimport * as types from './actionTypes';\nimport { auth } from '../firebase';\n\nexport const showPageLoading = () => ({ type: types.SHOW_PAGE_LOADING });\nexport const hidePageLoading = () => ({ type: types.HIDE_PAGE_LOADING });\nexport const authUser = payload => ({ type: types.AUTH_USER, payload});\nexport const unauthUser = () => ({type: types.UNAUTH_USER});\nexport const authRenew  = () => ({type: types.AUTH_RENEW});\n\nexport const signupUser = (payload) => async dispatch => {\n    //dispatch(showSignupLoading());\n    try {\n        const {data: {email, message}, status} = await axios.post('/api/auth/signup', payload);\n        \n        if (status === 200) {\n            loginUser(payload)\n        }\n\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport const loginUser = ({email, password}) => async dispatch => {\n    //dispatch(showLoginLoading());\n\n    // As httpOnly cookies are to be used. do not persist any state client side\n\n    auth.signInWithEmailAndPassword(email, password)\n    .then( user => {\n        // get the user's ID token a it is needed to exchange for a session cookie\n        console.log(auth)\n        // return auth.User.getIdToken()\n        // .then(idToken => {\n        //     console.log(\"idToken: \", idToken);\n        //     // dispatch(authUser({\n        //     //     email, photoURL, uid, refreshToken, idToken\n        //     // }));\n\n        //     const csrfToken = cookie.get('csrfToken');\n        //     return postIdTokenToSessionLogin('/api/auth/sessionLogin', idToken, csrfToken);\n        // })\n        // .then(() => {\n        //     // a page redirect would suffice as the persistence is set to NONE\n        //     return logoutUser()\n        // })\n        // .then(() => {\n        //     Router.push('/');\n        // })\n        // .catch(error => {\n        //     console.log(\"actions/auth/loginUser: idToken :\", error);\n        // })\n        Router.push('/');\n        dispatch(showPageLoading());\n    })\n    .catch(error => {\n        let errorCode = error.code;\n        let errorMsg  = error.message;\n\n        console.log(\"/action/auth/loginUser:\", error);\n    })\n}\n\nexport const logoutUser = () => async (dispatch, getState) => auth.signOut();\nexport const postIdTokenToSessionLogin = (url, idToken, csrfToken) => async dispatch => {\n    const resp = await axios.post(url, {idToken, csrfToken});\n}\n\n\n// WEBPACK FOOTER //\n// client/actions/auth.js","import {\n    showPageLoading,\n    hidePageLoading,\n    signupUser,\n    loginUser,\n    logoutUser,\n    unauthUser\n} from './auth';\n\nexport {\n    showPageLoading,\n    hidePageLoading,\n    signupUser,\n    loginUser,\n    logoutUser,\n    unauthUser\n}\n\n\n// WEBPACK FOOTER //\n// client/actions/index.js","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { auth } from './../../firebase';\nimport styled from 'styled-components';\nimport PageLoading from './../PageLoading';\nimport Header from '../Header';\nimport { hidePageLoading } from '../../actions';\nimport * as types from './../../actions/actionTypes';\n\nconst Wrapper = styled.div`\n    position: relative;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n\n    * {\n        box-sizing: border-box;\n    }\n\n    *::-moz-focus-inner {\n        border: none;\n    }\n\n    @media only screen and (max-width: 448px) {\n        font-size: 14px;\n    }\n`;\n\nconst ContentWrapper = styled.div`\n    min-height: 100vh;\n    width: 100%;\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    box-sizing: border-box;\n`;\n\nclass BodyWrapper extends React.Component {\n    componentDidMount () {\n        \n        auth.onAuthStateChanged( ( currentUser ) => {\n            \n            if (currentUser) {\n                this.props.authUser({\n                    uid : currentUser.uid,\n                    photoURL: currentUser.photoURL,\n                    email: currentUser.email,\n                    refreshToken: currentUser.refreshToken             \n                })\n            }\n            this.props.hidePageLoading();\n        });\n        \n    }\n    \n    render() {\n        const { children, pageLoading } = this.props;\n        const content = pageLoading ? <PageLoading/> : children;\n\n        return (\n            <Wrapper>\n                <ContentWrapper>\n                    <Header/>\n                    {content}\n                </ContentWrapper>\n            </Wrapper>\n        )\n    }\n}\n\nBodyWrapper.propTypes = {\n    children: PropTypes.node.isRequired,\n    hidePageLoading: PropTypes.func.isRequired,\n    pageLoading: PropTypes.bool.isRequired,\n    norenew: PropTypes.bool\n}\n\nBodyWrapper.defaultProps = {\n    norenew: false \n}\n\nconst mapStateToProps = ({loading: { page: pageLoading}}) => ({\n    pageLoading\n});\n\n\nconst mapDispatchToProps = dispatch => ({\n    hidePageLoading: () => dispatch(hidePageLoading()),\n    authUser: (payload) => dispatch({type: types.AUTH_USER, payload: payload})\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BodyWrapper);\n\n\n\n// WEBPACK FOOTER //\n// client/components/BodyWrapper/BodyWrapper.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport HeaderLogo from './HeaderLogo';\nimport HeaderLeftMenu from './HeaderLeftMenu';\nimport HeaderRightMenu from './HeaderRightMenu';\nimport { showPageLoading } from '../../actions';\n\nconst Wrapper = styled.header`\n    display: flex;\n    width: 1232px;\n    max-width: 100%;\n    padding: 0 32px;\n    height: 102px;\n    justify-content: space-between;\n    align-items: center;\n\n    @media only screen and (max-width: 768px) {\n        height: auto;\n        align-items: flex-start;\n        padding: 16px;\n        margin-bottom: 32px;\n    }\n`;\n\nconst LeftMenuWrapper = styled.div`\n    display: flex;\n\n    @media only screen and (max-width: 488px) {\n        flex-direction: column;\n    }\n`;\n\nconst Header = props => (\n    <Wrapper>\n      <LeftMenuWrapper>\n        <HeaderLogo showPageLoading={props.showPageLoading} />\n        <HeaderLeftMenu />\n      </LeftMenuWrapper>\n      <HeaderRightMenu showPageLoading={props.showPageLoading} />\n    </Wrapper>\n);\n  \nHeader.propTypes = {\n    showPageLoading: PropTypes.func.isRequired,\n};\n  \nconst mapDispatchToProps = dispatch => ({\n    showPageLoading: () => dispatch(showPageLoading()),\n});\n  \nexport default connect(null, mapDispatchToProps)(Header);\n\n\n// WEBPACK FOOTER //\n// client/components/Header/Header.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport Router from 'next/router';\nimport HeaderMenuItem from './HeaderMenuItem';\nimport { showPageLoading } from '../../actions';\n\nconst List = styled.ul`\n  display: flex;\n  align-items: flex-end;\n  list-style: none;\n  margin: 0 0 3px;\n  padding: 0;\n\n  @media only screen and (max-width: 488px) {\n    display: none;\n  }\n`;\n\nconst HeaderLeftMenu = props => {\n  const goTo = e => {\n    e.preventDefault();\n    const path = e.currentTarget.getAttribute('href');\n    if (!path || window.location.pathname === path) return;\n    props.showPageLoading();\n    Router.push(path);\n  };\n\n  const event_types = props.auth.isAuthenticated && (\n    <HeaderMenuItem>\n      <a href=\"/event_types\" title=\"Event Types\" onClick={goTo}>\n        Event Types\n      </a>\n    </HeaderMenuItem>\n  )\n\n  return (\n    <List>\n      {event_types}\n    </List>\n  );\n};\n\nHeaderLeftMenu.propTypes = {\n  showPageLoading: PropTypes.func.isRequired,\n  auth: PropTypes.shape({\n    isAuthenticated: PropTypes.bool.isRequired\n  }).isRequired\n};\n\nconst mapStateToProps = ({ auth }) => ({\n  auth\n})\n\nconst mapDispatchToProps = dispatch => ({\n  showPageLoading: bindActionCreators(showPageLoading, dispatch),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderLeftMenu);\n\n\n\n// WEBPACK FOOTER //\n// client/components/Header/HeaderLeftMenu.js","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Router from 'next/router';\nimport styled from 'styled-components';\nimport HeaderMenuItem from './HeaderMenuItem';\nimport { showPageLoading, logoutUser, unauthUser } from '../../actions';\nimport Button from '../Button';\n\nconst List = styled.ul`\n  display: flex;\n  float: right;\n  justify-content: flex-end;\n  align-items: center;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n`;\n\nconst IMAGE = styled.img`\n  border-radius: 50%;\n  width: 60px;\n  border: 5px solid #2979ff;\n  box-shadow: 0 5px 6px rgba(66,165,245,0.5);\n`;\n\nconst HeaderMenu = props => {\n  const goTo = e => {\n    e.preventDefault();\n    const path = e.currentTarget.getAttribute('href');\n    if (!path || window.location.pathname === path) return;\n    props.showPageLoading();\n    Router.push(path);\n  };\n\n  const logoutHandler = (e) => {\n    e.preventDefault();\n    props.logout()\n    .then( () => {\n      props.unAuthUser();\n      Router.push('/login');\n    })\n    .catch(() => {\n\n    });\n  }\n\n  const login = !props.auth.isAuthenticated && (\n    <HeaderMenuItem>\n      <a href=\"/login\" title=\"login / signup\" onClick={goTo}>\n        <Button>Login / Sign up</Button>\n      </a>\n    </HeaderMenuItem>\n  );\n\n  const profile = props.auth.isAuthenticated && (\n    <HeaderMenuItem>\n      <a href=\"/profile\" title=\"profile\">\n        <IMAGE alt=\"avatar\" src={props.auth.user.photoURL}></IMAGE>\n      </a>\n    </HeaderMenuItem>\n  )\n\n  const event_types = props.auth.isAuthenticated && (\n    <HeaderMenuItem>\n      <a href=\"/event_types\" title=\"Event Types\" onClick={goTo}>\n        Event Types\n      </a>\n    </HeaderMenuItem>\n  )\n\n  const logout = props.auth.isAuthenticated && (\n    <HeaderMenuItem>\n      <a href=\"/logout\" title=\"logout\" onClick={logoutHandler}>\n        <Button>Logout</Button>\n      </a>\n    </HeaderMenuItem>\n  );\n  // const settings = props.auth.isAuthenticated && (\n  //   <HeaderMenuItem>\n  //     <a href=\"/settings\" title=\"settings\" onClick={goTo}>\n  //       <Button>Settings</Button>\n  //     </a>\n  //   </HeaderMenuItem>\n  // );\n  return (\n    <List>\n      {event_types}\n      {profile}\n      {logout}\n      {login}\n    </List>\n  );\n};\n\nHeaderMenu.propTypes = {\n  showPageLoading: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = ({ auth }) => ({ auth });\n\nconst mapDispatchToProps = dispatch => ({\n  showPageLoading: () => dispatch(showPageLoading()),\n  logout: () => dispatch(logoutUser()),\n  unAuthUser: () => dispatch(unauthUser())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderMenu);\n\n\n\n// WEBPACK FOOTER //\n// client/components/Header/HeaderRightMenu.js"],"mappings":"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","sourceRoot":""}